bodies:
    - name: base
      pose: [0, 0, 0]
      type: dynamic
      color: [1, 1, 1, 0.75]
      footprints:
          - type: polygon
            density: 100
            points:
                [
                    [-1.03, -0.337],
                    [.07983, -0.337],
                    [.30, -.16111],
                    [.30, .16111],
                    [.07983, 0.337],
                    [-1.03, 0.337],
                ]

    - name: front_wheel
      pose: [0, 0, 0]
      color: [1, 1, 1, 0.75]
      footprints:
          - type: polygon
            density: 1.0
            points:
                [
                    [0.0875, -0.0250],
                    [0.0875, 0.0250],
                    [-0.0875, 0.0250],
                    [-0.0875, -0.0250],
                ]

    - name: rear_left_wheel
      pose: [0, 0, 0]
      color: [1, 1, 1, 0.75]
      footprints:
          - type: polygon
            density: 1.0
            points:
                [
                    [0.0875, -0.0255],
                    [0.0875, 0.0255],
                    [-0.0875, 0.0255],
                    [-0.0875, -0.0255],
                ]

    - name: rear_right_wheel
      pose: [0, 0, 0]
      color: [1, 1, 1, 0.75]
      footprints:
          - type: polygon
            density: 1.0
            points:
                [
                    [0.0875, -0.0255],
                    [0.0875, 0.0255],
                    [-0.0875, 0.0255],
                    [-0.0875, -0.0255],
                ]
    - name: laser_mount
      pose: [0, 0, 0]
      type: dynamic
      color: [1, 0, 0, 0.75]
      footprints:
          - type: polygon # Laser model
            sensor: true
            points:
                [
                    [.025, -.025],
                    [.025, 0.025],
                    [0.1, 0.0],
                    [-.025, 0.025],
                    [-.025, -0.025],
                ]
            density: 1
    - name: shell
      pose: [0, 0, 0]
      type: dynamic
      color: [0, 0, 1, 1.0]
      footprints:
          - type: circle
            radius: 0.2552
            center: [0, 0]
            density: 1
joints:
    - type: revolute
      name: front_wheel_revolute
      bodies:
          - name: front_wheel
            anchor: [0, 0]
          - name: base
            anchor: [0, 0]

    - type: weld
      name: rear_right_wheel_weld
      bodies:
          - name: rear_left_wheel
            anchor: [0, 0]
          - name: base
            anchor: [-0.83, 0.29]

    - type: weld
      name: rear_left_wheel_weld
      bodies:
          - name: rear_right_wheel
            anchor: [0, 0]
          - name: base
            anchor: [-0.83, -0.29]
    - type: weld
      name: laser_mount_weld
      bodies:
          - name: laser_mount
            anchor: [0, 0]
          - name: base
            anchor: [0, 0]
    - type: weld
      name: shell_mount_weld
      bodies:
          - name: shell
            anchor: [0, 0]
          - name: base
            anchor: [0, 0]

plugins:
    #- type: ModelTfPublisher
    #    name: tf_publisher
    #    publish_tf_world: true

    - type: TricycleDrive
      name: cleaner_drive
      body: base
      front_wheel_joint: front_wheel_revolute
      rear_left_wheel_joint: rear_left_wheel_weld
      rear_right_wheel_joint: rear_right_wheel_weld
      odom_frame_id: map

    #- type: Laser
    #    name: laser_front
    #    frame: laser_front
    #    topic: scan
    #    body: base
    #    broadcast_tf: true
    #    origin: [0.28, 0, 0]
    #    range: 20
    #    angle: {min: -2.356194490192345, max: 2.356194490192345, increment: 0.004363323129985824}
    #    noise_std_dev: 0.05
    #    update_rate: 40
    - type: Laser
      name: lidar
      body: base
      topic: scan
      range: 5
      angle:
          {
              min: -2.356194490192345,
              max: 2.356194490192345,
              increment: 0.04363323129985824,
          }
      #angle: {min: -2.748893571891069, max: 2.750638901143063, increment: 0.04363323129985824}
      noise_std_dev: 0.01
      update_rate: 5
      # layers: ["map"]
